---
title: '[Javascript] 스코프(Scope)'
date: 2021-02-24
categories: ['Javascript']
tags: ['Javascript', '모던 자바스크립트 DeepDive']
draft: false
---



> 아래 내용은 모던 자바스크립트 DeepDive 13장 스코프를 학습하며 정리한 내용입니다.

<!--more-->

### 1. 스코프란?

---

> **식별자가 유효한 범위**

- 모든 식별자는 다른 코드에서 자신을 참조할 수 있는 유효범위를 가진다.

```jsx
var x = 'global';

function foo() {
  var x = 'local';
  console.log(x);
}
foo(); //'local'
console.log(x); //'global'
```

- 식별자 결정 : 자바스크립트에서 어떤 변수를 참조해야할지 결정하는 작업 ⇒ 스코프를 통해 이뤄진다.
- var은 같은 스코프 내에서 재선언이 가능한데 이는 예상치 않은 결과를 나타낼 수 있음.

### 2. 스코프의 종류

---

1. **전역(global)** : 코드의 가장 바깥부분.
   - 어디서든 참조할 수 있게 된다.
2. **지역(local)** : 함수의 몸체 내부
   - 자신이 속한 지역 스코프와 그 하위 스코프에서 참조할 수 있게 된다.

### 3. 스코프체인

---

- 모든 스코프는 **계층적 구조**를 가진다. 스코프가 계층적으로 연결된 것이 스코프 체인.
- 모든 지역 스코프의 최상위 스코프는 전역스코프!
- 아래 코드의 스코프체인 : 전역 ← outer ← inner

```jsx
let x = 1;
function outer() {
  let z = 2;
  function inner() {
    let x = 3;
  }
}
```

> **렉시컬 환경 : 코드가 어디서 실행되며 주변에 어떤 코드가 있는지 정의되어 있는 환경.**

**<동작원리>**

- 자바스크립트 엔진은 참조할 때 스코프 체인을 통해 변수를 참조한다. 참조하는 코드의 스코프에서 상위로 이동하며 참조할 변수를 검색한다.

1. 코드를 실행하기에 앞서 렉시컬 환경을 생성한다.
   - 전역 렉시컬 환경 : 코드가 로드되면.
   - 함수 렉시컬 환경 : 함수가 호출되면.
2. 식별자를 선언하면 렉시컬 환경에 키로 저장된다.
3. 식별자를 할당하면 해당 키의 값에 저장된다.
4. 식별자를 참조할 경우 식별자의 검색은 렉시컬 환경 상에서 이뤄진다.

### 4. 함수 레벨 스코프

---

**블록 레벨 스코프** : 블록 단위로 지역 스코프가 생김

- if, for, while, try/catch 등의 블록은 모두 지역스코프를 만들어내는 것.

**함수 레벨 스코프** : 함수 단위로 지역 스코프가 생긴

- var 키워드로 선언된 변수는 함수 레벨 스코프를 가진다.
- 함수가 아닌 블록 내에서 var 키워드를 사용해 변수를 생성할 경우 전역변수로 생성된다.

### 5. 렉시컬 스코프

---

**동적 스코프** : **함수를 어디서 호출했는지**에 따라 상위 스코프를 결정

**렉시컬 스코프(정적 스코프)** : **함수를 어디서 정의했는지**에 따라 상위 스코프를 결정

> 자바스크립트는 렉시컬 스코프를 따른다. 즉, 함수를 정의한 위치에 따라 상위 스코프를 결정한다.

- bar은 전역에서 정의되어 있기때문에 상위스코프로 전역 객체를 가진다.

```jsx
var x = 1;
function foo() {
  var x = 10;
  bar();
}
function bar() {
  console.log(x);
}
foo(); //1;
bar(); //1;
```
