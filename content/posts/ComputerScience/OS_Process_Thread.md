---
title: '[CS] 프로세스'
date: 2022-01-18T09:50:30+09:00
categories: ['CS']
tags: ['CS','프로세스']
draft: true
---

<br>

<!--more-->

## 프로그램이란?

---

아직 실행되지 않은(메모리에 올라가 있지 않은) 보조 기억 장치에 저장된 파일(코드)을 의미한다.

ex) `.dmg`, `.exe` 등의 파일

<br>

## 프로세스

---

OS로부터 자원(메모리 공간)을 할당받은 하나의 작업을 의미한다. 간단히 말해 `실행중인 프로그램`을 말한다.

할당받는 자원에는 `CPU 시간`, 메모리 영역(Code, Data, Stack, Heap)이 있다.
메모리 영역 내에는 아래의 데이터들을 저장한다.

- **Code** : 실행 명령을 포함하는 코드들
- **Data** : 초기화 된 전역 변수, static 변수
- **Stack** : 지역 변수, 매개변수, 반환값등의 일시적인 데이터
- **Heap** : 동적으로 할당된 변수

<br>

또한 프로세스가 생성될때 프로세스에 대한 정보를 담는 프로세스 제어블록(PCB)이 함께 생성된다.

다음은 PCB가 담는 데이터의 종류다.

- **PID** : 프로세스별로 부여된 식별번호
- **프로세스 상태** : 각 프로세스가 가지는 현재 상태
- **프로그램 카운터** : 프로세서가 다음으로 실행할 명령어를 가리키는 값(메모리 주소를 가리키는 값).
- **실행 문맥** : 프로세스가 실행 상태에서 마지막으로 실행한 프로세서의 레지스터 정보.
- **스케줄링 우선순위** : 프로세서에서 실행되는 프로세서의 순서.
- **권한** : 프로세스가 접근할 수 있는 자원의 정보.
- **프로세스의 부모와 자식 프로세스**
- **프로세스의 메모리 주소를 가리키는 포인터**

<br>

## 프로그램의 동작 과정

---

프로그램을 실행시키면 컴퓨터에서 공간을 할당해 메모리에 코드가 올라가게 된다.
즉, `프로세스`가 된다.

하나의 프로세서(CPU)에서는 한번에 하나의 프로세스만 실행이 가능하다. 그렇다면 어떻게 여러개의 프로그램을 돌릴까?
**바로 프로세서에서 빠르게(짧은 텀으로) 프로세스를 변경하기 때문이다.** 

이렇게 바꾸는 작업을 `Context Switching` 이라고 한다. 이전의 프로세스 상태를 보관하고, 새로운 프로세스의 상태를 복구하는 작업이다.

<br>

## 스레드

---

프로세스 내에서 실행되는 여러 흐름의 단위를 말한다.

스레드는 각 프로세스 내에서 Stack만 할당받고 나머지는 공유한다.

<br><br>

## 멀티 프로세스 & 멀티 스레드

---

`멀티 프로세스` : 한 앱에서 여러가지 동작을 할 때 여러개의 프로세스를 만들어 해결하는 것.

- 장점
  - 하나의 프로세스에 문제가 생겨도 다른 프로세스에 영향이 적다.<br><br>
- 단점
  - Context Switching 과정에서 캐시 메모리 초기화 등의 작업들이 발생하여 비용이 많이 든다.
  - 프로세스간의 복잡한 통신 기법 → 프로세스들간에 변수 공유가 되지 않는다.

<br>

`멀티 스레드` : 한 앱에 대한 작업 단위가 나뉘어질 때 여러 쓰레드로 나뉘어지는 것.

- 윈도우, 리눅스 등 멀티 프로세싱을 지원하지만 멀티 스레딩을 기본으로 한다.<br><br>
- 장점
  - 시스템 자원 소모가 감소된다. → 프로세스를 생성해서 자원을 할당하는 일이 줄어든다.
  - Context Switching 비용이 감소된다.<br><br>
- 단점
  - 하나의 스레드에 문제가 발생할 경우 프로세스 자체에 영향이 간다.
